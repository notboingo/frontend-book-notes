{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[notes,setNotes]=useState([]);const[selectedNote,setSelectedNote]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[searchResults,setSearchResults]=useState([]);useEffect(()=>{fetch('https://fastapi-book-backend.onrender.com/notes')// Make sure backend is on this URL\n.then(res=>res.json()).then(data=>{console.log(\"All notes loaded:\",data);setNotes(data);}).catch(err=>console.error(\"Error loading notes:\",err));},[]);const fetchNoteContent=note_id=>{if(!note_id){console.warn(\"Invalid note ID passed to fetchNoteContent:\",note_id);return;}console.log(\"Fetching content for note ID:\",note_id);fetch(`https://fastapi-book-backend.onrender.com/notes/${note_id}`)// Note content fetch URL\n.then(res=>res.json()).then(data=>{console.log(\"Fetched note content:\",data);setSelectedNote(data.content);}).catch(err=>console.error(\"Error fetching note content:\",err));};const handleSearch=()=>{if(!searchQuery.trim()){setSearchResults([]);return;}console.log(\"Searching for:\",searchQuery);fetch(`https://fastapi-book-backend.onrender.com/search?q=${searchQuery}`)// Search fetch URL\n.then(res=>res.json()).then(data=>{console.log(\"Search results:\",data.results);setSearchResults(data.results||[]);}).catch(err=>console.error(\"Search error:\",err));};const renderNoteList=noteList=>/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:'none',padding:0},children:noteList.map(note=>{console.log(\"Note object\",note);// Log the note object to verify structure\nreturn/*#__PURE__*/_jsx(\"li\",{// Use note.note_id instead of note.id\nonClick:()=>{console.log(\"Note clicked:\",note);if(note.note_id){// Check for note_id instead of id\nfetchNoteContent(note.note_id);// Only call fetch if note_id is valid\n}else{console.warn(\"Note ID is missing or invalid:\",note);}},style:{cursor:'pointer',marginBottom:'10px'},children:note.title},note.note_id);})});// Highlight search terms in selected note content\nconst highlightText=(text,highlight)=>{if(!highlight.trim())return text;const regex=new RegExp(`(${highlight})`,'gi');const parts=text.split(regex);return parts.map((part,i)=>part.toLowerCase()===highlight.toLowerCase()?/*#__PURE__*/_jsx(\"mark\",{children:part},i):part);};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',padding:'20px'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{width:'300px',borderRight:'1px solid #ccc',paddingRight:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Search Notes\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),placeholder:\"Enter search query\",style:{width:'100%',padding:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,style:{marginTop:'10px',padding:'10px'},children:\"Search\"}),searchQuery&&searchResults.length>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Search Results\"}),renderNoteList(searchResults)]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{width:'300px',borderRight:'1px solid #ccc',padding:'0 20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Notes\"}),renderNoteList(notes)]}),/*#__PURE__*/_jsxs(\"div\",{style:{flex:1,paddingLeft:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Note Content\"}),/*#__PURE__*/_jsx(\"div\",{style:{whiteSpace:'pre-wrap'},children:selectedNote?highlightText(selectedNote,searchQuery):\"Click a note title to view its content.\"})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","App","notes","setNotes","selectedNote","setSelectedNote","searchQuery","setSearchQuery","searchResults","setSearchResults","fetch","then","res","json","data","console","log","catch","err","error","fetchNoteContent","note_id","warn","content","handleSearch","trim","results","renderNoteList","noteList","style","listStyle","padding","children","map","note","onClick","cursor","marginBottom","title","highlightText","text","highlight","regex","RegExp","parts","split","part","i","toLowerCase","display","width","borderRight","paddingRight","type","value","onChange","e","target","placeholder","marginTop","length","flex","paddingLeft","whiteSpace"],"sources":["C:/book-directory/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nfunction App() {\n  const [notes, setNotes] = useState([]);\n  const [selectedNote, setSelectedNote] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [searchResults, setSearchResults] = useState([]);\n\n  useEffect(() => {\n    fetch('https://fastapi-book-backend.onrender.com/notes') // Make sure backend is on this URL\n      .then(res => res.json())\n      .then(data => {\n        console.log(\"All notes loaded:\", data);\n        setNotes(data);\n      })\n      .catch(err => console.error(\"Error loading notes:\", err));\n  }, []);\n\n  const fetchNoteContent = (note_id) => {\n    if (!note_id) {\n      console.warn(\"Invalid note ID passed to fetchNoteContent:\", note_id);\n      return;\n    }\n\n    console.log(\"Fetching content for note ID:\", note_id);\n    fetch(`https://fastapi-book-backend.onrender.com/notes/${note_id}`) // Note content fetch URL\n      .then(res => res.json())\n      .then(data => {\n        console.log(\"Fetched note content:\", data);\n        setSelectedNote(data.content);\n      })\n      .catch(err => console.error(\"Error fetching note content:\", err));\n  };\n\n  const handleSearch = () => {\n    if (!searchQuery.trim()) {\n      setSearchResults([]);\n      return;\n    }\n\n    console.log(\"Searching for:\", searchQuery);\n    fetch(`https://fastapi-book-backend.onrender.com/search?q=${searchQuery}`) // Search fetch URL\n      .then(res => res.json())\n      .then(data => {\n        console.log(\"Search results:\", data.results);\n        setSearchResults(data.results || []);\n      })\n      .catch(err => console.error(\"Search error:\", err));\n  };\n\n  const renderNoteList = (noteList) => (\n    <ul style={{ listStyle: 'none', padding: 0 }}>\n      {noteList.map(note => {\n        console.log(\"Note object\", note); // Log the note object to verify structure\n        return (\n          <li\n            key={note.note_id} // Use note.note_id instead of note.id\n            onClick={() => {\n              console.log(\"Note clicked:\", note);\n              if (note.note_id) { // Check for note_id instead of id\n                fetchNoteContent(note.note_id); // Only call fetch if note_id is valid\n              } else {\n                console.warn(\"Note ID is missing or invalid:\", note);\n              }\n            }}\n            style={{ cursor: 'pointer', marginBottom: '10px' }}\n          >\n            {note.title}\n          </li>\n        );\n      })}\n    </ul>\n  );\n\n  // Highlight search terms in selected note content\n  const highlightText = (text, highlight) => {\n    if (!highlight.trim()) return text;\n    const regex = new RegExp(`(${highlight})`, 'gi');\n    const parts = text.split(regex);\n    return parts.map((part, i) =>\n      part.toLowerCase() === highlight.toLowerCase()\n        ? <mark key={i}>{part}</mark>\n        : part\n    );\n  };\n\n  return (\n    <div style={{ display: 'flex', padding: '20px' }}>\n      {/* Sidebar for search and results */}\n      <div style={{ width: '300px', borderRight: '1px solid #ccc', paddingRight: '20px' }}>\n        <h2>Search Notes</h2>\n        <input\n          type=\"text\"\n          value={searchQuery}\n          onChange={e => setSearchQuery(e.target.value)}\n          placeholder=\"Enter search query\"\n          style={{ width: '100%', padding: '10px' }}\n        />\n        <button onClick={handleSearch} style={{ marginTop: '10px', padding: '10px' }}>\n          Search\n        </button>\n\n        {searchQuery && searchResults.length > 0 && (\n          <>\n            <h3>Search Results</h3>\n            {renderNoteList(searchResults)}\n          </>\n        )}\n      </div>\n\n      {/* All notes list */}\n      <div style={{ width: '300px', borderRight: '1px solid #ccc', padding: '0 20px' }}>\n        <h2>All Notes</h2>\n        {renderNoteList(notes)}\n      </div>\n\n      {/* Note content display */}\n      <div style={{ flex: 1, paddingLeft: '20px' }}>\n        <h2>Note Content</h2>\n        <div style={{ whiteSpace: 'pre-wrap' }}>\n          {selectedNote ? highlightText(selectedNote, searchQuery) : \"Click a note title to view its content.\"}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}